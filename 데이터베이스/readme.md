# Database(데이터베이스)
------------------------------
### 데이터베이스의 특징
1. 데이터의 독립성
	* 물리적 독립성: 데이터의 사이즈를 늘리거나 성능 향상을 위해 데이터파일을 늘리거나 새롭게 추가하더라도 관련된 응용 프로그램을 수정할 필요가 없다.
    * 논리적 독립성 : 데이터베이스는 논리적인 구조로 다양한 응용 프로그램의 논리적 요구를 만족시켜줄 수 있다.
2. 데이터의 무결성
여러 경로를 통해 잘못된 데이터가 발생하는 경우의 수를 방지하는 기능으로 데이터의 유효성 검사를 통해 데이터의 무결성을 구현하게 된다.
3. 데이터의 보안성
인가된 사용자들만 데이터베이스나 데이터베이스 내의 자원에 접근할 수 있도록 계정관리 또는 접근 권한을 설정함으로써 모든 데이터에 보안을 구현할 수 있다.
4. 데이터의 일관성
연관된 정보를 논리적인 구조로 관리함으로써 어떤 하나의 데이터만 변경했을 경우 발생할 수 있는 데이터의 불일치성을 배제할 수 있다. 또한 작업 중 일부 데이터만 변경되어 나머지 데이터와 일치하지 않는 경우의 수를 배제할 수 있다.
5. 데이터 중복 최소화
데이터베이스는 데이터를 통합해서 관리함으로써 파일 시스템의 단점중 하나인 자료의 중복과 데이터의 중복성 문제를 해결할 수 있다.
--------------------
**기본키, 후보키, 슈퍼키 차이**
1. 후보키 
후보키는 기본키로 사용할 수 있는 속성들을 뜻함. 후보키는 "유일성", "최소성"을 만족해야 한다.
2. 기본키
기본키는 말그대로 후보키에서 선택된것. 기본키만 있으면 릴레이션에서 튜플을 딱 하나 구별 해낼수 있다. NULL 값이 불가하다.
기본키로 선택된 속성 라인은 동일한 값이 절대로 들어갈수 없다
**중복불가, 유일성, NULL불가**
3. 대체키
후보키가 2개이상일때 기본키제외하고 나머지키
4. 슈퍼키
하나이상의 속성들의 집합으로 이루어진것. (학번+주민등록번호), (전화번호+학번+주민등록번호)
슈퍼키는 유일성은 만족하지만, 최소성은 만족하지 않는다.

**유일성** : 하나의 키로 어떠한 행을 바로 찾아낼 수 잇는 능력, 후보키나 기본키, 슈퍼키
*이름만 있을때는 유일성을 만족 못시킬수 있지만 이름+주민등록번호의 경우 제대로된 하나의 값을 걸러내므로 유일성을 만족한다고 볼수 있다.*

**최소성** : 레코들을 식별하는데 꼭 필요한 속성들로만 구성하는것. 예를들어 슈퍼키가 학번+주민등록번호인경우는 유일성을 가진 학번과 주민등록 번호를 굳이 안합쳐도 되기 때문에 이때 슈퍼키는 최소성을 만족시키지 못한다.

-----------------------
## 정규화
정규화란 데이터베이스에서 중복을 최소화하기 위해 데이터를 구조화하는 작업이다. 좀 더 구체적으로는 불만족스러운 나쁜 릴레이션의 애트리뷰트들을 나누어서 좋은 작은 릴레이션으로 분해하는 작업을 말한다. 정규화 과정을 거치게 되면 정규형을 만족하게 된다. 정규형이란 특정 조건을 만족하는 릴레이션의 스키마의 형태를 말하며 제 1 정규형, 제2 정규형, 제 3 정규형 등이 존재한다.

**함수적 종속성이란**
함수적 종속성이란 애트리뷰트 데이터들의 의미와 애트리뷰트들 간의 상호관계로부터 유도되는 제약조건의 일종이다. X와 Y를 임의의 애트리뷰트 집합이라고 할 때, **X의 값이 Y의 값을 유일하게 결정한다면 "X는 Y를 함수적으로 결정한다"** 라고 한다. 함수적 종속성은 실세계에서 존재하는 애트리뷰트들 사이의 제약조건으로부터 유도된다. 또한 각종 추론 규칙에 따라서 애트리뷰트들간의 함수적 종속성을 판단할 수 있다.


**제1 정규형**
애트리뷰트의 도메인이 오직 원자값만을 포함하고 튜플의 모든 애트리뷰트가 도메인에 속하는 하나의 값을 가져야한다. 즉 복합 애트리뷰트, 다중값 애트리뷰트, 중첩 릴레이션 등 비 원자적인 애트리뷰트들을 허용하지 않는 릴레이션 형태를 말한다.

**제2 정규형**
**각 nonprime attribute는 각 key에 대해 fully dependent 한가?**
모든 비주요 애트리뷰트들이 주요 애트리뷰트에 대해서 완전 함수적 종속이면 제 2 정규형을 만족한다고 볼 수 있다. 완전 함수 종속이란 ```X->Y```라고 가정했을 때, X의 어떠한 애트리뷰트라도 제거하면 더 이상 함수적 종속성이 성립하지 않는 경우를 말한다. 즉 키가아닌 열들이 각각 후보키에 대해 결정되는 릴레이션 형태를 말한다.

**제3 정규형**
**각 nonprime attribute는 각 key에 대해 nontransitively dependent한가?**
어떠한 비주요 애트리뷰트도 기본키에 대해서 이행적으로 종속되지 않으면 제3 정규형을 만족한다고 볼 수 있다. 이행 함수적 종속이란 '''X->Y''', '''Y->Z'''의 경우에 의해서 추론될 수 있는 '''X->Z'''의 종속관계를 말한다. 즉, 비주요 애트리뷰트가 비주요 애트리뷰트에 의해 종속되는 경우가 없는 릴레이션 형태를 말한다.

**BCNF 정규형**
**각 nontrivial FD X->Y X는 superkey인가?**
여러 후보 키가 존재하는 릴레이션에 해당하는 정규화 내용이다. 복잡한 식별자 관계에 의해 발생하는 문제를 해결하기 위해 제 3정규형을 보완하는데 의미가 있다. 비주요 애트리뷰트가 후보키의 일부를 결정하는 분해하는 과정을 말한다.

각 정규형은 그의 선행 정규형보다 엄격한 조건을 갖는다

1NF은 2NF에 포함되고, 2NF는 3NF에 포함되고 3NF는 BCNF에 포함된다.


----------------------
## 트랜잭션
### 트랜잭션이란 무엇인가
트랜잭션은 작업의 완전성을 보장해 주는 것이다. 즉 논리적인 작업 셋을 모두 완벽하게 처리하거나 또는 처리하지 못할 경우 에는 원 상테로 복구해서 작업의 일부만 적용되는 현상이 발생하지 않게 만들어 주는 기능이다. 사용자의 입장서는 작업의 논리적 단위로 이해를 할 수있고 시스템의 입장에서는 데이터들을 접근 또는 변경하는 프로그램의 단위가 된다.

### 트랜잭션과 lock
락과 트랜잭션은 서로 비슷한 개념 같지만 사실 잠금은 동시성을 제어하기 위한 기능이고 트랜잭션은 데이터의 정합성르 보장하기 위한 기능이다. 잠금은 여러 커넥션에서 동시에 동일한 자원을 요청할 경우 순서대로 한 시점에는 하나의 커넥션만 변경할 수 있게 해주는 역할을 한다. 여기서 자원은 레코드나 테이블을 말한다. 이와는 조금 다르게 트랜잭션은 꼭 여러개의 변경 작업을 수행하는 쿼리가 조합되었을 때만 의미 있는 개념은 아니다. 트랜잭션은 하나의 논리적인 작업 셋 중 하나의 쿼리가 있든 두개 이상의 쿼리가 있든 관계없이 논리적인 작업 셋 자체가 100% 적용되거나 아무것도 적용되지 않아야 함을 보장하는 것이다. 예를 들면 HW에러 또는 SW에러와 같은 문제로 인해 작업에 실패가 있을 경우, 특별한 대책이 필요하게 되는데 이러한 문제를 해결하는 것이다.

### 트랜잭션의 특성
트랜잭션은 다음의 ACID라는 4가지 특성을 만족해야한다.
**원자성(Atomicity)**
만약 트랜잭션 중간에 어떠한 문제가 발생한다면 트랜잭션에 해당하는 어떠한 작업 내용도 수행되어서는 안되며 아무런 문제가 발생되지 않았을 경우에만 모든 작업이 수행되어야 한다.
**일관성(Consistency)**
트랜잭션이 완료된 다음의 상태에서도 트랜잭션이 일어나기 전의 상황과 동일하게 데이터의 일관성을 보장해야한다.
**고립성(isolation)**
각각의 트랜잭션은 서로 간섭없이 독립적으로 수행되어야 한다.
**지속성(Durability)**
트랜잭션이 정상적으로 종료된 다음에는 영구적으로 데이터베이스에 작업의 결과가 저장되어야 한다.

